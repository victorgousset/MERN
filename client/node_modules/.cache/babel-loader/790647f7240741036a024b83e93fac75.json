{"ast":null,"code":"var _jsxFileName = \"/home/victor/Documents/MERN/client/src/App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport { BrowserRouter as Router, Switch, Route, Link, useParams, useRouteMatch } from \"react-router-dom\";\nimport './App.css';\nimport Axios from \"axios\";\nimport axios from \"axios\";\nimport { Redirect } from 'react-router-dom';\nimport Cookies from 'universal-cookie';\nimport Profil from './profil';\n\nclass App extends Component {\n  /* state = { users: [] }\n    componentDidMount() {\n       fetch('/users')\n           .then(res => res.json())\n           .then(users => this.setState({ users }));\n                              {this.state.users.map(user =>\n                 <li key={user.id}>{user.username}</li>)}\n   }*/\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 33\n      }\n    }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 33\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 33\n      }\n    }, \"Register\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/profil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 33\n      }\n    }, \"Profil\"))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Home, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Register, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/profil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Profil, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 33\n      }\n    }))))));\n  }\n\n}\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.cookies = new Cookies();\n    this.state = {\n      isSignedUp: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }\n    }, \"Home\"));\n  }\n\n}\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.cookies = new Cookies();\n\n    this.mySubmitHandlerLogin = event => {\n      event.preventDefault();\n      axios({\n        method: 'POST',\n        url: 'http://localhost:4000/user/login',\n        data: {\n          login: this.state.login,\n          password: this.state.password\n        }\n      }).then(response => {\n        if (response.status === 200) {\n          this.cookies.set('Connected');\n          this.setState({\n            isSignedUp: true\n          });\n        }\n      });\n    };\n\n    this.myChangeHandler = event => {\n      let nam = event.target.name;\n      let val = event.target.value;\n      this.setState({\n        [nam]: val\n      });\n    };\n\n    this.state = {\n      login: '',\n      password: '',\n      isSignedUp: false\n    };\n  }\n\n  render() {\n    if (this.cookies.get('Connected')) {\n      this.setState({\n        isSignedUp: true\n      });\n    }\n\n    if (this.state.isSignedUp) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.mySubmitHandlerLogin,\n      method: \"POST\",\n      action: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"login\",\n      type: \"text\",\n      placeholder: \"login\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"submit\",\n      type: \"submit\",\n      value: \"Se connecter\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n    this.cookies = new Cookies();\n\n    this.mySubmitHandler = event => {\n      event.preventDefault(); //console.log(this.state.login)\n\n      axios({\n        method: \"POST\",\n        url: \"http://localhost:4000/user/create\",\n        data: {\n          login: this.state.login,\n          email: this.state.email,\n          password: this.state.password\n        }\n      }).then(response => {\n        if (response.status === 400) {\n          alert(\"Tous les champs ne sont pas remplis\");\n        } else if (response.status === 200) {\n          alert(\"Tu es bien inscrit\");\n        } else if (response.data.msg === 'loginExist') {\n          alert(\"Ce login est déjà utilisé\");\n        }\n      });\n      /*axios.post(`http://localhost:4000/user/create`)\n          .then(res => {\n              console.log(res);\n              console.log(res.data);\n          })*/\n    };\n\n    this.myChangeHandler = event => {\n      let nam = event.target.name;\n      let val = event.target.value;\n      this.setState({\n        [nam]: val\n      });\n    };\n\n    this.state = {\n      login: '',\n      email: '',\n      password: '',\n      isSignedUp: false\n    };\n  }\n\n  render() {\n    if (this.cookies.get('Connected')) {\n      this.setState({\n        isSignedUp: true\n      });\n    }\n\n    if (this.state.isSignedUp) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }, \"Hello \", this.state.login, \" \", this.state.email, \" \", this.state.password), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.mySubmitHandler,\n      method: \"POST\",\n      action: \"/create\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"login\",\n      type: \"text\",\n      placeholder: \"login\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"email\",\n      type: \"email\",\n      placeholder: \"Email\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password_confirm\",\n      type: \"password\",\n      placeholder: \"password_confirm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"submit\",\n      type: \"submit\",\n      value: \"S'inscrire\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/victor/Documents/MERN/client/src/App.js"],"names":["React","Component","BrowserRouter","Router","Switch","Route","Link","useParams","useRouteMatch","Axios","axios","Redirect","Cookies","Profil","App","render","Home","constructor","props","cookies","state","isSignedUp","Login","mySubmitHandlerLogin","event","preventDefault","method","url","data","login","password","then","response","status","set","setState","myChangeHandler","nam","target","name","val","value","get","pathname","Register","mySubmitHandler","email","alert","msg"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport logo from './logo.svg';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useParams,\n    useRouteMatch\n} from \"react-router-dom\";\nimport './App.css';\nimport Axios from \"axios\";\nimport axios from \"axios\";\nimport { Redirect } from 'react-router-dom'\nimport Cookies from 'universal-cookie';\nimport Profil from './profil'\n\nclass App extends Component {\n    /* state = { users: [] }\n\n     componentDidMount() {\n         fetch('/users')\n             .then(res => res.json())\n             .then(users => this.setState({ users }));\n\n                               {this.state.users.map(user =>\n                   <li key={user.id}>{user.username}</li>)}\n     }*/\n\n    render() {\n        return (\n            <div className=\"App\">\n                <Router>\n                    <div>\n                        <ul>\n                            <li>\n                                <Link to=\"/\">Home</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/login\">Login</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/register\">Register</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/profil\">Profil</Link>\n                            </li>\n                        </ul>\n\n                        <hr />\n\n                        <Switch>\n                            <Route exact path=\"/\">\n                                <Home />\n                            </Route>\n                            <Route path=\"/login\">\n                                <Login />\n                            </Route>\n                            <Route path=\"/register\">\n                                <Register />\n                            </Route>\n                            <Route path=\"/profil\">\n                                <Profil />\n                            </Route>\n                        </Switch>\n                    </div>\n                </Router>\n            </div>\n        );\n    }\n}\n\nclass Home extends Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            isSignedUp: false,\n        }\n    }\n    cookies = new Cookies();\n\n    render() {\n        return (\n            <div>\n                <h2>Home</h2>\n            </div>\n        )\n    }\n}\n\nclass Login extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            login: '',\n            password: '',\n            isSignedUp: false,\n        };\n    }\n    cookies = new Cookies();\n\n    mySubmitHandlerLogin = (event) => {\n        event.preventDefault()\n        axios({\n            method: 'POST',\n            url: 'http://localhost:4000/user/login',\n            data: {\n                login: this.state.login,\n                password: this.state.password\n            }\n        }).then((response)=>{\n            if (response.status === 200){\n                this.cookies.set('Connected')\n                this.setState({ isSignedUp: true });\n            }\n        })\n    }\n\n    myChangeHandler = (event) => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    }\n\n    render() {\n        if (this.cookies.get('Connected')) {\n            this.setState({ isSignedUp: true });\n        }\n        if (this.state.isSignedUp) {\n            return <Redirect to = {{ pathname: \"/\" }} />;\n        }\n        return (\n            <div>\n                <h2>Login</h2>\n                <form onSubmit={this.mySubmitHandlerLogin} method='POST' action='/login'>\n                    <input name=\"login\" type=\"text\" placeholder=\"login\" onChange={this.myChangeHandler} />\n                    <input name=\"password\" type=\"password\" placeholder=\"password\" onChange={this.myChangeHandler} />\n                    <input name=\"submit\" type=\"submit\" value=\"Se connecter\" onChange={this.myChangeHandler} />\n                </form>\n            </div>\n        )\n    }\n\n}\n\nclass Register extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            login: '',\n            email: '',\n            password: '',\n            isSignedUp: false,\n        };\n    }\n    cookies = new Cookies();\n\n    mySubmitHandler = (event) => {\n        event.preventDefault();\n        //console.log(this.state.login)\n\n        axios({\n            method: \"POST\",\n            url:\"http://localhost:4000/user/create\",\n            data: {\n                login: this.state.login,\n                email: this.state.email,\n                password: this.state.password\n            }\n        }).then((response)=>{\n            if (response.status === 400){\n                alert(\"Tous les champs ne sont pas remplis\");\n            }else if(response.status === 200){\n                alert(\"Tu es bien inscrit\")\n            }else if(response.data.msg === 'loginExist'){\n                alert(\"Ce login est déjà utilisé\")\n            }\n        })\n\n        /*axios.post(`http://localhost:4000/user/create`)\n            .then(res => {\n                console.log(res);\n                console.log(res.data);\n            })*/\n    }\n\n    myChangeHandler = (event) => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    }\n\n    render() {\n        if (this.cookies.get('Connected')) {\n            this.setState({ isSignedUp: true });\n        }\n        if (this.state.isSignedUp) {\n            return <Redirect to = {{ pathname: \"/\" }} />;\n        }\n        return (\n            <div>\n                <h1>Hello {this.state.login} {this.state.email} {this.state.password}</h1>\n                <h3>Register</h3>\n                <form onSubmit={this.mySubmitHandler} method='POST' action='/create'>\n                    <input name=\"login\" type=\"text\" placeholder=\"login\" onChange={this.myChangeHandler} />\n                    <input name=\"email\" type=\"email\" placeholder=\"Email\" onChange={this.myChangeHandler} />\n                    <input name=\"password\" type=\"password\" placeholder=\"password\" onChange={this.myChangeHandler}/>\n                    <input name=\"password_confirm\" type=\"password\" placeholder=\"password_confirm\"/>\n                    <input name=\"submit\" type=\"submit\" value=\"S'inscrire\"/>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}