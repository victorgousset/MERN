{"ast":null,"code":"var _jsxFileName = \"/home/victor/Documents/MERN/client/src/App.js\";\nimport React, { Component } from 'react';\nimport logo from \"./logo.svg\";\nimport { BrowserRouter as Router, Switch, Route, Link, useParams, useRouteMatch } from \"react-router-dom\";\nimport './App.css';\nimport Axios from \"axios\";\nimport axios from \"axios\";\n\nclass App extends Component {\n  /* state = { users: [] }\n    componentDidMount() {\n       fetch('/users')\n           .then(res => res.json())\n           .then(users => this.setState({ users }));\n                              {this.state.users.map(user =>\n                 <li key={user.id}>{user.username}</li>)}\n   }*/\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Router, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 33\n      }\n    }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 33\n      }\n    }, \"Login\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 33\n      }\n    }, \"Register\"))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Home, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Login, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(Route, {\n      path: \"/register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Register, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 33\n      }\n    }))))));\n  }\n\n}\n\nfunction Home() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, \"Home\"));\n}\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.mySubmitHandlerLogin = event => {\n      event.preventDefault();\n      axios({\n        method: 'POST',\n        url: 'http://localhost:4000/user/login',\n        data: {\n          login: this.state.login,\n          password: this.state.password\n        }\n      }).then(response => {\n        //console.log(response.data)\n        if (response.status === 200) {\n          this.setState({\n            isSignedUp: true\n          });\n        }\n      });\n    };\n\n    this.myChangeHandler = event => {\n      let nam = event.target.name;\n      let val = event.target.value;\n      this.setState({\n        [nam]: val\n      });\n    };\n\n    this.state = {\n      login: '',\n      password: '',\n      isSignedUp: false\n    };\n  }\n\n  render() {\n    if (this.state.isSignedUp) {\n      // redirect to home if signed up\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: \"/\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.mySubmitHandlerLogin,\n      method: \"POST\",\n      action: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"login\",\n      type: \"text\",\n      placeholder: \"login\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"submit\",\n      type: \"submit\",\n      value: \"Se connecter\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n\n    this.mySubmitHandler = event => {\n      event.preventDefault(); //console.log(this.state.login)\n\n      axios({\n        method: \"POST\",\n        url: \"http://localhost:4000/user/create\",\n        data: {\n          login: this.state.login,\n          email: this.state.email,\n          password: this.state.password\n        }\n      }).then(response => {\n        console.log(response.data.msg);\n\n        if (response.data.msg === 'empty') {\n          alert(\"Tous les champs ne sont pas remplis\");\n        } else if (response.data.msg === 'ok') {\n          alert(\"Tu es bien inscrit\");\n        } else if (response.data.msg === 'loginExist') {\n          alert(\"Ce login est déjà utilisé\");\n        }\n      });\n      /*axios.post(`http://localhost:4000/user/create`)\n          .then(res => {\n              console.log(res);\n              console.log(res.data);\n          })*/\n    };\n\n    this.myChangeHandler = event => {\n      let nam = event.target.name;\n      let val = event.target.value;\n      this.setState({\n        [nam]: val\n      });\n    };\n\n    this.state = {\n      login: '',\n      email: '',\n      password: ''\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 17\n      }\n    }, \"Hello \", this.state.login, \" \", this.state.email, \" \", this.state.password), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.mySubmitHandler,\n      method: \"POST\",\n      action: \"/create\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      name: \"login\",\n      type: \"text\",\n      placeholder: \"login\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"email\",\n      type: \"email\",\n      placeholder: \"Email\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password\",\n      type: \"password\",\n      placeholder: \"password\",\n      onChange: this.myChangeHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"password_confirm\",\n      type: \"password\",\n      placeholder: \"password_confirm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      name: \"submit\",\n      type: \"submit\",\n      value: \"S'inscrire\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/victor/Documents/MERN/client/src/App.js"],"names":["React","Component","BrowserRouter","Router","Switch","Route","Link","useParams","useRouteMatch","Axios","axios","App","render","Home","Login","constructor","props","mySubmitHandlerLogin","event","preventDefault","method","url","data","login","state","password","then","response","status","setState","isSignedUp","myChangeHandler","nam","target","name","val","value","pathname","Register","mySubmitHandler","email","console","log","msg","alert"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport logo from './logo.svg';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useParams,\n    useRouteMatch\n} from \"react-router-dom\";\nimport './App.css';\nimport Axios from \"axios\";\nimport axios from \"axios\";\n\nclass App extends Component {\n    /* state = { users: [] }\n\n     componentDidMount() {\n         fetch('/users')\n             .then(res => res.json())\n             .then(users => this.setState({ users }));\n\n                               {this.state.users.map(user =>\n                   <li key={user.id}>{user.username}</li>)}\n     }*/\n\n    render() {\n        return (\n            <div className=\"App\">\n                <Router>\n                    <div>\n                        <ul>\n                            <li>\n                                <Link to=\"/\">Home</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/login\">Login</Link>\n                            </li>\n                            <li>\n                                <Link to=\"/register\">Register</Link>\n                            </li>\n                        </ul>\n\n                        <hr />\n\n                        <Switch>\n                            <Route exact path=\"/\">\n                                <Home />\n                            </Route>\n                            <Route path=\"/login\">\n                                <Login />\n                            </Route>\n                            <Route path=\"/register\">\n                                <Register />\n                            </Route>\n                        </Switch>\n                    </div>\n                </Router>\n            </div>\n        );\n    }\n}\n\nfunction Home() {\n    return (\n        <div>\n            <h2>Home</h2>\n        </div>\n    );\n}\n\nclass Login extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            login: '',\n            password: '',\n            isSignedUp: false,\n        };\n    }\n\n    mySubmitHandlerLogin = (event) => {\n        event.preventDefault()\n        axios({\n            method: 'POST',\n            url: 'http://localhost:4000/user/login',\n            data: {\n                login: this.state.login,\n                password: this.state.password\n            }\n        }).then((response)=>{\n            //console.log(response.data)\n            if (response.status === 200){\n                this.setState({ isSignedUp: true });\n            }\n        })\n    }\n\n    myChangeHandler = (event) => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    }\n\n    render() {\n        if (this.state.isSignedUp) {\n            // redirect to home if signed up\n            return <Redirect to = {{ pathname: \"/\" }} />;\n        }\n        return (\n            <div>\n                <h2>Login</h2>\n                <form onSubmit={this.mySubmitHandlerLogin} method='POST' action='/login'>\n                    <input name=\"login\" type=\"text\" placeholder=\"login\" onChange={this.myChangeHandler} />\n                    <input name=\"password\" type=\"password\" placeholder=\"password\" onChange={this.myChangeHandler} />\n                    <input name=\"submit\" type=\"submit\" value=\"Se connecter\" onChange={this.myChangeHandler} />\n                </form>\n            </div>\n        )\n    }\n\n}\n\nclass Register extends Component{\n    constructor(props) {\n        super(props);\n        this.state = {\n            login: '',\n            email: '',\n            password: '',\n        };\n    }\n\n    mySubmitHandler = (event) => {\n        event.preventDefault();\n        //console.log(this.state.login)\n\n        axios({\n            method: \"POST\",\n            url:\"http://localhost:4000/user/create\",\n            data: {\n                login: this.state.login,\n                email: this.state.email,\n                password: this.state.password\n            }\n        }).then((response)=>{\n            console.log(response.data.msg)\n            if (response.data.msg === 'empty'){\n                alert(\"Tous les champs ne sont pas remplis\");\n            }else if(response.data.msg === 'ok'){\n                alert(\"Tu es bien inscrit\")\n            }else if(response.data.msg === 'loginExist'){\n                alert(\"Ce login est déjà utilisé\")\n            }\n        })\n\n        /*axios.post(`http://localhost:4000/user/create`)\n            .then(res => {\n                console.log(res);\n                console.log(res.data);\n            })*/\n    }\n\n    myChangeHandler = (event) => {\n        let nam = event.target.name;\n        let val = event.target.value;\n        this.setState({[nam]: val});\n    }\n\n    render() {\n        return (\n            <div>\n                <h1>Hello {this.state.login} {this.state.email} {this.state.password}</h1>\n                <h3>Register</h3>\n                <form onSubmit={this.mySubmitHandler} method='POST' action='/create'>\n                    <input name=\"login\" type=\"text\" placeholder=\"login\" onChange={this.myChangeHandler} />\n                    <input name=\"email\" type=\"email\" placeholder=\"Email\" onChange={this.myChangeHandler} />\n                    <input name=\"password\" type=\"password\" placeholder=\"password\" onChange={this.myChangeHandler}/>\n                    <input name=\"password_confirm\" type=\"password\" placeholder=\"password_confirm\"/>\n                    <input name=\"submit\" type=\"submit\" value=\"S'inscrire\"/>\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}